
<head>
	<meta charset="utf-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<title>GlobalRemoteObjectFaultHandler Global Error Handler For Parsley 3</title>
	<meta name="description," content="">

	<meta name="viewport" content="width=device-width, initial-scale=1.0 user-scalable=no">

	<link rel="shortcut icon" href="http://localhost:2368/assets/favicon.png?v=31dfb26f46">

	<link rel="stylesheet" href="../assets/css/all.min.css?v=31dfb26f46">
	<link rel="stylesheet" media="(max-width: 699px)" href="../assets/css/jass_mob.min.css?v=31dfb26f46">
	<link rel="stylesheet" media="(min-width: 700px)" href="../assets/css/jass_des.min.css?v=31dfb26f46">

	<meta name="twitter:widgets:theme" content="light">
	<meta name="twitter:widgets:link-color" content="#2E8CDA">
	<meta name="twitter:widgets:border-color" content="#E8E8E8">
	<link rel="canonical" href="index.html">
    <meta name="referrer" content="origin">
    
    <meta property="og:site_name" content="TiltBlog">
    <meta property="og:type" content="article">
    <meta property="og:title" content="GlobalRemoteObjectFaultHandler Global Error Handler For Parsley 3">
    <meta property="og:description" content="Further to my previous post, I still couldn’t get the GlobalRemoteObjectFaultHandler Metadata tag to capture application exceptions being thrown globally. And the reason became perfectly clear upon studying the Cairngorm Parsley Integration code. Seems the Cairngorm code base is...">
    <meta property="og:url" content="http://localhost:2368/globalremoteobjectfaulthandler-global-error-handler-for-parsley-3/">
    <meta property="article:published_time" content="2012-12-14T16:41:00.000Z">
    <meta property="article:modified_time" content="2015-10-04T15:41:47.000Z">
    
    <meta name="twitter:card" content="summary">
    <meta name="twitter:title" content="GlobalRemoteObjectFaultHandler Global Error Handler For Parsley 3">
    <meta name="twitter:description" content="Further to my previous post, I still couldn’t get the GlobalRemoteObjectFaultHandler Metadata tag to capture application exceptions being thrown globally. And the reason became perfectly clear upon studying the Cairngorm Parsley Integration code. Seems the Cairngorm code base is...">
    <meta name="twitter:url" content="http://localhost:2368/globalremoteobjectfaulthandler-global-error-handler-for-parsley-3/">
    
    <script type="application/ld+json">
{
    "@context": "http://schema.org",
    "@type": "Article",
    "publisher": "TiltBlog",
    "author": {
        "@type": "Person",
        "name": "James Hill",
        "image": "//www.gravatar.com/avatar/9c737c0d0ac21a56844c7c90d80a9bd1?s=250&d=mm&r=x",
        "url": "http://localhost:2368/author/james",
        "sameAs": null,
        "description": null
    },
    "headline": "GlobalRemoteObjectFaultHandler Global Error Handler For Parsley 3",
    "url": "http://localhost:2368/globalremoteobjectfaulthandler-global-error-handler-for-parsley-3/",
    "datePublished": "2012-12-14T16:41:00.000Z",
    "dateModified": "2015-10-04T15:41:47.000Z",
    "description": "Further to my previous post, I still couldn’t get the GlobalRemoteObjectFaultHandler Metadata tag to capture application exceptions being thrown globally. And the reason became perfectly clear upon studying the Cairngorm Parsley Integration code. Seems the Cairngorm code base is..."
}
    </script>

    <meta name="generator" content="Ghost 0.7">
    <link rel="alternate" type="application/rss+xml" title="TiltBlog" href="../rss/index.html">
</head>
<body class="post-template">
	<style media="screen">
	nav {
		float: right;
		font-size: 24px!important;
	}

	nav ul.nav li {
		padding: 0em 0.4em;
	}

</style>
<header>
	<div class="wrapper">

		<div id="logo">
			<a href="../">TiltBlog</a>
		</div>
		<nav>
			<ul class="nav">
				<li class="nav-twitter">
					<a class="icons--icon icon" target="_blank" href="https://twitter.com/jhchill666" title="twitter">
						<i class="fa fa fa-twitter-square"></i>
					</a>
				</li>
				<li class="nav-linkedin">
					<a class="icons--icon icon" target="_blank" href="https://uk.linkedin.com/in/tiltdigital" title="linked">
						<i class="fa fa-linkedin-square"></i>
					</a>
				</li>
				<li class="nav-github">
					<a class="icons--icon icon" href="https://github.com/jamiehill" title="github" target="_blank">
						<i class="fa fa-github-square"></i>
					</a>
				</li>
			</ul>
		</nav>
		<div class="mobile_social">
			<h5>Follow me</h5>
			<div class="icons">
				<style media="screen">
    .icons a {
        font-size: .75em;
        margin: 2em auto 0;
        text-align: center;
        color: #444444;
        font-size: 32px;
    }
</style>
<div class="icons">
    <section class="blog--social">
        <div class="icons">
            <a class="icons--icon icon" target="_blank" href="https://twitter.com/jhchill666" title="twitter">
                <i class="fa fa fa-twitter-square"></i>
            </a>
            <a class="icons--icon icon" target="_blank" href="https://uk.linkedin.com/in/tiltdigital" title="linked">
                <i class="fa fa-linkedin-square"></i>
            </a>
            <a class="icons--icon icon" href="https://github.com/jamiehill" title="github" target="_blank">
                <i class="fa fa-github-square"></i>
            </a>
        </div>
    </section>
</div>
			</div>
		</div>
	</div>
</header>

	
<main class="content" role="main">
    <div class="wrapper">
        <div class="post">
            <article id="43" class="post">
                <div class="avatar_title">
                    <h1 class="title">
                        <a href="index.html">GlobalRemoteObjectFaultHandler Global Error Handler For Parsley 3</a>
                    </h1>
                </div>
                <section>
                  <p>Further to my <a href="http://blog.tiltdigital.com/adobe/globalremoteobjectfaulthandler-woes/">previous post</a>, I still couldn’t get the GlobalRemoteObjectFaultHandler Metadata tag to capture application exceptions being thrown globally. And the reason became perfectly clear upon studying the <a href="http://sourceforge.net/adobe/cairngorm/code/843/tree/cairngorm3/trunk/libraries/IntegrationParsley/">Cairngorm Parsley Integration</a> code.</p>

<p>Seems the Cairngorm code base is still stuck pre-Parsley 3, almost a year and a half after it’s release.</p>

<p>Solution – Write the thing myself. Spent some time Googling for a solution, so I hope this might be useful to someone.</p>

<p>The functionality is encapsulated by two classes, and the extension initialised in a third. I’ve renamed the extension GlobalServiceFault – to keep a differentiation from the original. You can find the original ‘GlobalRemnoteObjectFaultHandler’ code here.</p>

<pre><code class="language-javascript">package  
{
  import mx.rpc.events.FaultEvent;

  import org.spicefactory.parsley.core.builder.ObjectDefinitionBuilder;
  import org.spicefactory.parsley.core.builder.ObjectDefinitionDecorator;
  import org.spicefactory.parsley.core.scope.ScopeName;
  import org.spicefactory.parsley.messaging.MessageHandler;

  [Metadata(types="method")]
  public class GlobalServiceFault implements ObjectDefinitionDecorator
  {
      [Target]
      public var method:String;

      private var proxyRegistered:Boolean = false;

      public var scope:String = ScopeName.GLOBAL;

      public function decorate(builder:ObjectDefinitionBuilder):void
      {
          if (!proxyRegistered)
          {
              proxyRegistered = true;
              builder
                  .registry
                      .builders
                      .forClass(GlobalServiceFaultProcessor)
                      .asSingleton()
                      .register();
          }

          MessageHandler
              .forMethod(method)
                  .type(FaultEvent)
                  .scope(scope)
                  .selector(GlobalServiceFaultProcessor.messageSelector)
                      .apply(builder);
      }
  }
}
</code></pre>

<p>And the ObjectProcessor …  </p>

<pre><code>package  
{
  import mx.rpc.events.FaultEvent;
  import mx.rpc.remoting.RemoteObject;

  public class GlobalServiceFaultProcessor
  {
      public static const messageSelector:String = "cairngorm::globalFault";

      [MessageDispatcher]
      public var dispatcher:Function;

      [Observe(phase="preInit")]
      public function preInit(ro:RemoteObject):void
      {
          ro.addEventListener(FaultEvent.FAULT, handleFault);
      }

      [Observe(phase="postDestroy")]
      public function postDestroy(ro:RemoteObject):void
      {
          ro.removeEventListener(FaultEvent.FAULT, handleFault);
      }

      private function handleFault(event:FaultEvent):void
      {
          dispatcher(event, messageSelector);
      }
  }
}
</code></pre>

<p>To get it all working, you need to register the new Metadata with Parsley. <a href="http://www.spicefactory.org/parsley/docs/3.0/manual/extensions.php#metadata_register">(see here)</a></p>

<pre><code>Metadata.registerMetadataClass(GlobalServiceFault);  
</code></pre>

<p>and also specify to the mxmlc compiler to keep instances of your new metadata from being striped out.  </p>

<pre><code>-keep-as3-metadata+=GlobalServiceFault
</code></pre>
                </section>
                <div class="share_tags">
                    <div class="share">
                        <h5>Share this post</h5>
                        <div class="icons">
                            <a class="twitter" href="https://twitter.com/share?text=GlobalRemoteObjectFaultHandler%20Global%20Error%20Handler%20For%20Parsley%203&amp;url=http://localhost:2368/globalremoteobjectfaulthandler-global-error-handler-for-parsley-3/" target="_blank">
                                <i class="fa fa-twitter"></i>
                            </a>
                            <a class="facebook" href="https://www.facebook.com/sharer/sharer.php?u=http://localhost:2368/globalremoteobjectfaulthandler-global-error-handler-for-parsley-3/" target="_blank">
                                <i class="fa fa-facebook"></i>
                            </a>
                            <a class="google-plus" href="https://plus.google.com/share?url=http://localhost:2368/globalremoteobjectfaulthandler-global-error-handler-for-parsley-3/" target="_blank">
                                <i class="fa fa-google-plus"></i>
                            </a>
                        </div>
                    </div>
                </div>
                <div class="author"><figure class="avatar">
                        <img src="http://www.gravatar.com/avatar/9c737c0d0ac21a56844c7c90d80a9bd1?s=250&amp;d=mm&amp;r=x" alt="James Hill">
                    </figure><div class="info">
                        <h3 class="name"><a href="http://localhost:2368/author/james/">James Hill</a></h3>
                        <p class="more">Ver <a href="http://localhost:2368/author/james/">articles</a></p>
                    </div>
                </div>
            </article>
            <div class="postx">
                <a href="../globalremoteobjectfaulthandler-woes/">GlobalRemoteObjectFaultHandler woes</a>

                <a href="../adding-multiple-assets-to-your-swc-using-apache-ant-and-adobe-flex-component-compiler-compc/">Adding Multiple Assets To Your Swc Using Apache ANT And Adobe Flex Component Compiler (Compc)</a>
            </div>

            <div id="disqus_thread"></div>
<script src="../assets/js/comments_disqus.min.js?v=31dfb26f46"></script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>    
        </div><aside>
	<a href="mailto:jamie@tiltdigital.com" target="_blank" style="background: #4794DD;border-radius: 2px;width: 100%;display: inline-block;text-align: center;color: white;padding: .5em;margin-bottom: .75em;">Contact me</a>
	<div class="social">
	</div>
	<div class="twitter">
		<a class="twitter-timeline" href="https://twitter.com/hashtag/javascript" data-widget-id="651003791966347264">#javascript Tweets</a>
<script>!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0],p=/^http:/.test(d.location)?'http':'https';if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src=p+"://platform.twitter.com/widgets.js";fjs.parentNode.insertBefore(js,fjs);}}(document,"script","twitter-wjs");</script>	</div>
	<footer>

	</footer>
</aside>

    </div>
</main>


	
	<!-- You can safely delete this line if your theme does not require jQuery -->
<script type="text/javascript" src="https://code.jquery.com/jquery-1.11.3.min.js"></script>
	<script src="../assets/js/all.min.js?v=31dfb26f46"></script>

	<script src="../assets/js/count_disqus.min.js?v=31dfb26f46"></script>
</body>
